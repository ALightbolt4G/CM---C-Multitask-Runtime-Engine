<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CM Library v4.2.3 - Advanced C Framework Documentation</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="icon" type="image/jpeg" href="logo.jpg">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #fafbfc;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f0f3f8;
            --bg-code: #1e1e1e;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --accent-info: #3b82f6;
            --accent-purple: #8b5cf6;
            --border: #e2e8f0;
            --card-shadow: 0 20px 30px -10px rgba(0,0,0,0.1);
            --header-bg: rgba(255,255,255,0.9);
            
            /* VS Code Colors */
            --code-keyword: #569cd6;
            --code-function: #dcdcaa;
            --code-string: #ce9178;
            --code-comment: #6a9955;
            --code-number: #b5cea8;
            --code-type: #4ec9b0;
            --code-preprocessor: #c586c0;
            --code-operator: #d4d4d4;
        }

        body.dark {
            --bg-primary: #0b1120;
            --bg-secondary: #1e293b;
            --bg-tertiary: #2d3a4f;
            --bg-code: #1e1e1e;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border: #334155;
            --card-shadow: 0 20px 30px -10px rgba(0,0,0,0.6);
            --header-bg: rgba(15,23,42,0.9);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.2s;
        }

        /* ===== Header ===== */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--header-bg);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo i {
            color: var(--accent-info);
            font-size: 2rem;
        }

        .version {
            background: linear-gradient(135deg, var(--accent-info), var(--accent-purple));
            color: white;
            padding: 0.25rem 1rem;
            border-radius: 30px;
            font-size: 0.9rem;
            margin-left: 1rem;
        }

        /* ===== Mobile Menu Button ===== */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-primary);
            cursor: pointer;
            margin-right: 1rem;
        }

        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 30px;
            padding: 0.5rem 1.25rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: var(--bg-tertiary);
        }

        /* ===== Layout ===== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
        }

        /* ===== Sidebar ===== */
        .sidebar {
            position: sticky;
            top: 90px;
            height: calc(100vh - 100px);
            overflow-y: auto;
            background: var(--bg-secondary);
            border-radius: 24px;
            border: 1px solid var(--border);
            padding: 1.5rem;
            transition: left 0.3s ease;
        }

        .sidebar h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            color: var(--text-secondary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-radius: 12px;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        .sidebar-nav a:hover {
            background: var(--bg-tertiary);
            color: var(--accent-info);
            transform: translateX(5px);
        }

        .sidebar-nav .warning {
            color: var(--accent-warning);
        }

        .sidebar-nav .danger {
            color: var(--accent-danger);
        }

        /* ===== Sidebar Overlay ===== */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(4px);
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
            z-index: 90;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* ===== Main Content ===== */
        .main-content {
            min-width: 0;
        }

        .section {
            margin-bottom: 3rem;
            scroll-margin-top: 100px;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        .section-title i {
            color: var(--accent-info);
            font-size: 1.8rem;
        }

        /* ===== Cards ===== */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem;
            transition: transform 0.2s, border-color 0.2s;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-info);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .card-header i {
            font-size: 1.5rem;
            color: var(--accent-info);
        }

        .card-header h3 {
            font-size: 1.25rem;
        }

        /* ===== Tables ===== */
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-secondary);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border);
            margin: 1.5rem 0;
        }

        .table th {
            background: var(--bg-tertiary);
            font-weight: 600;
            padding: 1rem;
            text-align: left;
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .table tr:hover {
            background: var(--bg-tertiary);
        }

        /* ===== VS Code Syntax Highlighting ===== */
        pre {
            background: var(--bg-code);
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 16px;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
            max-width: 100%;
        }

        /* Keywords */
        .code-keyword {
            color: var(--code-keyword);
        }
        
        /* Functions */
        .code-function {
            color: var(--code-function);
        }
        
        /* Strings */
        .code-string {
            color: var(--code-string);
        }
        
        /* Comments */
        .code-comment {
            color: var(--code-comment);
        }
        
        /* Numbers */
        .code-number {
            color: var(--code-number);
        }
        
        /* Types */
        .code-type {
            color: var(--code-type);
        }
        
        /* Preprocessor */
        .code-preprocessor {
            color: var(--code-preprocessor);
        }
        
        /* Operators */
        .code-operator {
            color: var(--code-operator);
        }

        /* Apply to code blocks */
        pre code .keyword { color: var(--code-keyword); }
        pre code .function { color: var(--code-function); }
        pre code .string { color: var(--code-string); }
        pre code .comment { color: var(--code-comment); }
        pre code .number { color: var(--code-number); }
        pre code .type { color: var(--code-type); }
        pre code .preprocessor { color: var(--code-preprocessor); }
        pre code .operator { color: var(--code-operator); }

        .inline-code {
            background: var(--bg-tertiary);
            color: var(--accent-info);
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        /* ===== Issue badges ===== */
        .issue-severity {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .severity-critical {
            background: #ef4444;
            color: white;
        }

        .severity-high {
            background: #f59e0b;
            color: white;
        }

        .severity-medium {
            background: #3b82f6;
            color: white;
        }

        .severity-low {
            background: #10b981;
            color: white;
        }

        /* ===== Example box ===== */
        .example-box {
            background: var(--bg-tertiary);
            border-left: 4px solid var(--accent-info);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
        }

        .example-box.warning {
            border-left-color: var(--accent-warning);
        }

        .example-box.danger {
            border-left-color: var(--accent-danger);
        }

        .example-box.success {
            border-left-color: var(--accent-success);
        }

        /* ===== Tags ===== */
        .tag {
            display: inline-block;
            padding: 0.2rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-right: 0.5rem;
            background: var(--bg-tertiary);
        }

        .tag-feature {
            background: var(--accent-info);
            color: white;
        }

        .tag-issue {
            background: var(--accent-warning);
            color: white;
        }

        .tag-fixed {
            background: var(--accent-success);
            color: white;
        }

        /* ===== Animations ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        /* ===== Smooth Scroll Native ===== */
        html {
            scroll-behavior: smooth;
        }

        /* ===== Responsive Design ===== */
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .menu-toggle {
                display: block;
            }

            .sidebar {
                position: fixed;
                left: -100%;
                top: 0;
                height: 100%;
                width: 280px;
                border-radius: 0 24px 24px 0;
                transition: left 0.3s ease;
                z-index: 100;
            }

            .sidebar.active {
                left: 0;
            }

            .main-content {
                padding-top: 1rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .card {
                padding: 1rem;
            }

            pre {
                font-size: 0.8rem;
                padding: 1rem;
            }

            .table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        @media (max-width: 600px) {
            .header {
                padding: 1rem;
            }

            .header-content {
                gap: 0.5rem;
            }

            .logo {
                font-size: 1.2rem;
            }

            .logo i {
                font-size: 1.5rem;
            }

            .version {
                font-size: 0.7rem;
                padding: 0.2rem 0.6rem;
                margin-left: 0.5rem;
            }

            .theme-toggle {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .card-grid {
                grid-template-columns: 1fr;
            }

            .section-title {
                font-size: 1.3rem;
            }

            .example-box {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div style="display: flex; align-items: center;">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <span>CM Library <span class="version">v4.2.3</span></span>
                </div>
            </div>
            <div class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>Dark Mode</span>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <h3><i class="fas fa-compass"></i> Navigation</h3>
            <ul class="sidebar-nav">
                <li><a href="#overview"><i class="fas fa-home"></i> Overview</a></li>
                <li><a href="#quickstart"><i class="fas fa-rocket"></i> Quick Start</a></li>
                <li><a href="#memory-system"><i class="fas fa-memory"></i> Memory System</a></li>
                <li><a href="#arena-allocator"><i class="fas fa-tachometer-alt"></i> Arena Allocator</a></li>
                <li><a href="#garbage-collector"><i class="fas fa-recycle"></i> Garbage Collector</a></li>
                <li><a href="#string-class"><i class="fas fa-font"></i> String Class</a></li>
                <li><a href="#array-class"><i class="fas fa-layer-group"></i> Array Class</a></li>
                <li><a href="#map-class"><i class="fas fa-map"></i> Map Class</a></li>
                <li><a href="#error-handling"><i class="fas fa-exclamation-triangle"></i> Error Handling</a></li>
                <li><a href="#oop-macros"><i class="fas fa-cubes"></i> OOP Macros</a></li>
                <li><a href="#thread-safety"><i class="fas fa-threads"></i> Thread Safety</a></li>
                <li><a href="#known-issues"><i class="fas fa-bug"></i> Known Issues</a></li>
                <li><a href="#solutions"><i class="fas fa-check-double"></i> Solutions</a></li>
                <li><a href="#examples"><i class="fas fa-code"></i> Complete Examples</a></li>
                <li><a href="#api-reference"><i class="fas fa-book"></i> API Reference</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Section -->
            <section id="overview" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-info-circle"></i>
                    <span>Library Overview</span>
                </div>
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-crown"></i>
                        <h3>CM Library - C Multitask Intelligent Framework</h3>
                    </div>
                    <p><strong>Author:</strong> Adham Hossam | <strong>Version:</strong> 4.2.3 | <strong>License:</strong> MIT</p>
                    <p>A comprehensive C framework bringing modern programming paradigms to C:</p>
                    <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;">
                        <span class="tag tag-feature"><i class="fas fa-check"></i> Dual Memory System</span>
                        <span class="tag tag-feature"><i class="fas fa-check"></i> Garbage Collection</span>
                        <span class="tag tag-feature"><i class="fas fa-check"></i> Arena Allocator</span>
                        <span class="tag tag-feature"><i class="fas fa-check"></i> OOP with Macros</span>
                        <span class="tag tag-feature"><i class="fas fa-check"></i> Exception Handling</span>
                        <span class="tag tag-feature"><i class="fas fa-check"></i> Thread Safety</span>
                        <span class="tag tag-feature"><i class="fas fa-check"></i> Generic Collections</span>
                    </div>
                </div>
            </section>

            <!-- Quick Start -->
            <section id="quickstart" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-hourglass-start"></i>
                    <span>Quick Start</span>
                </div>
                <pre><code><span class="preprocessor">#include</span> <span class="string">"CM.h"</span>

<span class="type">int</span> <span class="function">main</span>() {
    <span class="comment">// Initialize library (automatic via constructor)</span>
    <span class="function">CM_ABOUT</span>();  <span class="comment">// Display banner</span>
    
    <span class="comment">// üî∑ Create a string</span>
    String* message = <span class="function">String_new</span>(<span class="string">"Hello, CM Library!"</span>);
    message-><span class="function">upper</span>(message);
    message-><span class="function">print</span>(message);
    <span class="function">printf</span>(<span class="string">"\nLength: %d\n"</span>, message-><span class="function">length_func</span>(message));
    
    <span class="comment">// Array usage</span>
    Array* numbers = <span class="function">Array_new</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>), <span class="number">5</span>);
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < <span class="number">10</span>; i++) {
        numbers-><span class="function">push</span>(numbers, &i);
    }
    
    <span class="comment">// Map usage</span>
    Map* config = <span class="function">Map_new</span>();
    <span class="type">int</span> port = <span class="number">8080</span>;
    config-><span class="function">set</span>(config, <span class="string">"port"</span>, &port);
    
    <span class="comment">// Cleanup</span>
    <span class="function">String_delete</span>(message);
    <span class="function">Array_delete</span>(numbers);
    <span class="function">Map_delete</span>(config);
    
    <span class="comment">// Show GC statistics</span>
    <span class="function">CM_REPORT</span>();
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>
                <div class="example-box">
                    <i class="fas fa-terminal"></i>
                    <strong>Compilation:</strong>
                    <pre style="margin: 0.5rem 0 0; background: transparent; padding: 0;"><code>gcc main.c CM.c -o program -lpthread -lm</code></pre>
                </div>
            </section>

            <!-- Memory System -->
            <section id="memory-system" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-memory"></i>
                    <span>Memory System Architecture</span>
                </div>
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-bolt"></i>
                            <h3>Arena Tier</h3>
                        </div>
                        <p>Fast bump allocator with zero tracking overhead. Perfect for temporary allocations.</p>
                        <ul style="margin-top: 1rem; list-style: none;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> O(1) allocation</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> No GC overhead</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Bulk free</li>
                            <li><i class="fas fa-times" style="color: #ef4444;"></i> No individual free</li>
                        </ul>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-recycle"></i>
                            <h3>GC Tier</h3>
                        </div>
                        <p>Mark & Sweep with reference counting. Thread-safe automatic memory management.</p>
                        <ul style="margin-top: 1rem; list-style: none;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Automatic cleanup</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Reference counting</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Destructor support</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Memory tracking</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Arena Allocator -->
            <section id="arena-allocator" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Arena Allocator - Features & Issues</span>
                </div>
                
                <div class="example-box">
                    <h4>‚úÖ Correct Usage</h4>
                    <pre><code>CMArena* arena = <span class="function">cm_arena_create</span>(<span class="number">1024</span> * <span class="number">1024</span>);
<span class="function">cm_arena_push</span>(arena);

<span class="comment">// Allocations from arena</span>
<span class="type">char</span>* buffer = (<span class="type">char</span>*)<span class="function">cm_alloc</span>(<span class="number">512</span>, <span class="string">"temp"</span>, __FILE__, __LINE__);
<span class="type">int</span>* numbers = (<span class="type">int</span>*)<span class="function">cm_alloc</span>(<span class="number">100</span> * <span class="keyword">sizeof</span>(<span class="type">int</span>), <span class="string">"temp"</span>, __FILE__, __LINE__);

<span class="function">cm_arena_pop</span>();
<span class="function">cm_arena_destroy</span>(arena);</code></pre>
                </div>

                <div class="example-box warning">
                    <h4>‚ö†Ô∏è CM_WITH_ARENA Macro Issues</h4>
                    <pre><code><span class="comment">// PROBLEM: Memory leak on break/return</span>
<span class="function">CM_WITH_ARENA</span>(<span class="number">4096</span>) {
    <span class="type">char</span>* data = (<span class="type">char</span>*)<span class="function">cm_alloc</span>(<span class="number">100</span>, <span class="string">"temp"</span>, __FILE__, __LINE__);
    <span class="keyword">if</span> (some_condition) {
        <span class="keyword">break</span>;  <span class="comment">// ‚ùå Arena NOT destroyed! Memory leak!</span>
    }
    <span class="keyword">if</span> (error) {
        <span class="keyword">return</span>; <span class="comment">// ‚ùå Arena NOT destroyed! Memory leak!</span>
    }
} <span class="comment">// Arena destroyed only on normal exit</span></code></pre>
                    <p><strong>Issue:</strong> The macro doesn't handle early exits. Arena persists if break/return used.</p>
                </div>

                <div class="example-box success">
                    <h4>‚úÖ Fixed in v4.2.2</h4>
                    <pre><code><span class="comment">// New macro - safe with break/return</span>
<span class="preprocessor">#define</span> CM_WITH_ARENA(size) \
    <span class="keyword">for</span> (CMArena* _a __attribute__((cleanup(cm_arena_cleanup))) = <span class="function">cm_arena_create</span>(size); \
         _a; _a = NULL) \
        <span class="keyword">for</span> (<span class="type">int</span> _i = (cm_arena_push(_a), <span class="number">0</span>); _i < <span class="number">1</span>; _i++)

<span class="comment">// Cleanup function in CM.c</span>
<span class="type">void</span> <span class="function">cm_arena_cleanup</span>(<span class="type">void</span>* ptr) {
    CMArena** arena_ptr = (CMArena**)ptr;
    <span class="keyword">if</span> (*arena_ptr) {
        <span class="function">pthread_mutex_lock</span>(&cm_mem.arena_lock);
        cm_mem.current_arena = NULL;
        <span class="function">pthread_mutex_unlock</span>(&cm_mem.arena_lock);
        
        <span class="function">cm_arena_destroy</span>(*arena_ptr);
        *arena_ptr = NULL;
        
        <span class="function">printf</span>(<span class="string">"[ARENA] Cleanup auto-destroyed arena\n"</span>);
    }
}</code></pre>
                    <p><strong>Now:</strong> The macro works with break, return, goto - no memory leaks!</p>
                </div>
            </section>

            <!-- Garbage Collector -->
            <section id="garbage-collector" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-recycle"></i>
                    <span>Garbage Collector</span>
                </div>
                <pre><code><span class="comment">// Reference counting in action</span>
String* s1 = <span class="function">String_new</span>(<span class="string">"shared"</span>);
String* s2 = s1;  <span class="comment">// Both point to same object</span>
<span class="function">cm_retain</span>(s2);    <span class="comment">// Manual retain if needed</span>

<span class="function">cm_free</span>(s1);      <span class="comment">// ref_count-- (still alive)</span>
<span class="function">cm_free</span>(s2);      <span class="comment">// ref_count-- -> 0, object freed</span>

<span class="comment">// Manual GC collection</span>
<span class="function">cm_gc_collect</span>();  <span class="comment">// Forces mark & sweep</span></code></pre>
                
                <table class="table">
                    <tr><th>Function</th><th>Description</th><th>Thread Safety</th></tr>
                    <tr><td>cm_alloc()</td><td>Allocate tracked memory</td><td>‚úÖ Mutex protected</td></tr>
                    <tr><td>cm_free()</td><td>Decrement refcount, free if zero</td><td>‚úÖ Mutex protected</td></tr>
                    <tr><td>cm_retain()</td><td>Increment reference count</td><td>‚úÖ Mutex protected</td></tr>
                    <tr><td>cm_gc_collect()</td><td>Mark & sweep collection</td><td>‚úÖ Mutex protected</td></tr>
                </table>
            </section>

            <!-- String Class -->
            <section id="string-class" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-font"></i>
                    <span>String Class - OOP Style</span>
                </div>
                
                <div class="example-box warning">
                    <h4>‚ö†Ô∏è Legacy Issue: Confusing 'this' parameter name</h4>
                    <pre><code><span class="comment">// Old implementation (problematic for C++)</span>
<span class="keyword">struct</span> String {
    <span class="type">char</span>* data;
    <span class="type">int</span> length;
    <span class="keyword">struct</span> String* (*concat)(<span class="keyword">struct</span> String* <span class="keyword">this</span>, <span class="type">const</span> <span class="type">char</span>* other);
};</code></pre>
                    <p><strong>Issue:</strong> Parameter name 'this' can conflict with C++ and is misleading.</p>
                </div>

                <div class="example-box success">
                    <h4>‚úÖ Fixed in v4.2.2 - Using 'self'</h4>
                    <pre><code><span class="comment">// New implementation - clear parameter names</span>
<span class="keyword">struct</span> String {
    <span class="type">char</span>* data;
    <span class="type">int</span> length;
    <span class="keyword">struct</span> String* (*concat)(<span class="keyword">struct</span> String* <span class="keyword">self</span>, <span class="type">const</span> <span class="type">char</span>* other);
    <span class="type">void</span> (*print)(<span class="keyword">struct</span> String* <span class="keyword">self</span>);
};</code></pre>
                </div>

                <h4>String API Examples</h4>
                <pre><code>String* s = <span class="function">String_new</span>(<span class="string">"  Hello CM  "</span>);
s-><span class="function">upper</span>(s);                    <span class="comment">// "  HELLO CM  "</span>
s-><span class="function">lower</span>(s);                    <span class="comment">// "  hello cm  "</span>
s-><span class="function">concat</span>(s, <span class="string">" Library!"</span>);      <span class="comment">// "  hello cm  Library!"</span>
<span class="function">printf</span>(<span class="string">"Char at 2: %c\n"</span>, s-><span class="function">charAt</span>(s, <span class="number">2</span>));
<span class="function">printf</span>(<span class="string">"Length: %d\n"</span>, s-><span class="function">length_func</span>(s));
s-><span class="function">print</span>(s);                    <span class="comment">// Print to stdout</span>
<span class="function">String_delete</span>(s);</code></pre>
            </section>

            <!-- Array Class -->
            <section id="array-class" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-layer-group"></i>
                    <span>Array Class - Generic Container</span>
                </div>
                <pre><code><span class="comment">// Creating arrays for different types</span>
Array* ints = <span class="function">Array_new</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>), <span class="number">10</span>);
Array* strings = <span class="function">Array_new</span>(<span class="keyword">sizeof</span>(String*), <span class="number">5</span>);

<span class="comment">// Adding elements</span>
<span class="type">int</span> value = <span class="number">42</span>;
ints-><span class="function">push</span>(ints, &value);

<span class="comment">// Retrieving elements</span>
<span class="type">int</span>* retrieved = (<span class="type">int</span>*)ints-><span class="function">get</span>(ints, <span class="number">0</span>);
<span class="function">printf</span>(<span class="string">"Value: %d\n"</span>, *retrieved);

<span class="comment">// Array info</span>
<span class="function">printf</span>(<span class="string">"Size: %d, Capacity: %d\n"</span>, ints-><span class="function">size</span>(ints), ints->capacity);

<span class="function">Array_delete</span>(ints);</code></pre>
            </section>

            <!-- Map Class -->
            <section id="map-class" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-map"></i>
                    <span>Map Class - Hash Table</span>
                </div>
                <pre><code>Map* config = <span class="function">Map_new</span>();

<span class="comment">// Store different types</span>
<span class="type">int</span> port = <span class="number">3000</span>;
<span class="type">double</span> timeout = <span class="number">30.5</span>;
<span class="type">char</span>* host = <span class="string">"localhost"</span>;

config-><span class="function">set</span>(config, <span class="string">"port"</span>, &port);
config-><span class="function">set</span>(config, <span class="string">"timeout"</span>, &timeout);
config-><span class="function">set</span>(config, <span class="string">"host"</span>, &host);

<span class="comment">// Retrieve values</span>
<span class="type">int</span>* p = (<span class="type">int</span>*)config-><span class="function">get</span>(config, <span class="string">"port"</span>);
<span class="type">double</span>* t = (<span class="type">double</span>*)config-><span class="function">get</span>(config, <span class="string">"timeout"</span>);
<span class="type">char</span>** h = (<span class="type">char</span>**)config-><span class="function">get</span>(config, <span class="string">"host"</span>);

<span class="function">printf</span>(<span class="string">"Port: %d\n"</span>, *p);
<span class="function">printf</span>(<span class="string">"Timeout: %.1f\n"</span>, *t);
<span class="function">printf</span>(<span class="string">"Host: %s\n"</span>, *h);

<span class="comment">// Check existence</span>
<span class="keyword">if</span> (config-><span class="function">has</span>(config, <span class="string">"port"</span>)) {
    <span class="function">printf</span>(<span class="string">"Port configured\n"</span>);
}

<span class="function">Map_delete</span>(config);</code></pre>
            </section>

            <!-- Error Handling -->
            <section id="error-handling" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Error Handling - Thread-Safe Exceptions</span>
                </div>
                
                <div class="example-box danger">
                    <h4>‚ö†Ô∏è CRITICAL: Thread Safety Issue with Exceptions</h4>
                    <pre><code><span class="comment">// Old implementation (DANGEROUS in multi-threaded code)</span>
<span class="keyword">extern</span> jmp_buf* cm_exception_buffer;  <span class="comment">// Global variable - NOT thread safe!</span>

<span class="preprocessor">#define</span> CM_TRY() \
    jmp_buf __cm_buf; \
    cm_exception_buffer = &__cm_buf;  <span class="comment">// Race condition in threads! \</span>
    <span class="keyword">if</span> (setjmp(__cm_buf) == <span class="number">0</span>)</code></pre>
                    <p><strong>Issue:</strong> Global exception buffer causes crashes in multi-threaded code.</p>
                </div>

                <div class="example-box success">
                    <h4>‚úÖ Thread-Safe Solution in v4.2.2</h4>
                    <pre><code><span class="comment">// In CM.h - Thread-local storage</span>
<span class="keyword">extern</span> __thread jmp_buf* cm_exception_buffer;  <span class="comment">// Thread-local!</span>

<span class="preprocessor">#define</span> CM_TRY() \
    jmp_buf __cm_buf; \
    jmp_buf* __old = cm_exception_buffer; \
    cm_exception_buffer = &__cm_buf; \
    <span class="keyword">if</span> (setjmp(__cm_buf) == <span class="number">0</span>)

<span class="preprocessor">#define</span> CM_CATCH() \
    <span class="keyword">else</span> { cm_exception_buffer = __old; }</code></pre>
                </div>

                <h4>Basic Error Handling</h4>
                <pre><code><span class="function">cmTry</span> {
    <span class="type">int</span>* ptr = NULL;
    <span class="keyword">if</span> (!ptr) {
        <span class="function">cmThrow</span>(CM_ERROR_NULL_POINTER, <span class="string">"Null pointer detected!"</span>);
    }
} <span class="function">cmCatch</span> {
    <span class="function">printf</span>(<span class="string">"Error %d: %s\n"</span>, <span class="function">cmErrorCode</span>(), <span class="function">cmErrorMsg</span>());
}</code></pre>
            </section>

            <!-- OOP Macros - Enhanced Version -->
            <section id="oop-macros" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-cubes"></i>
                    <span>OOP Macros - Enhanced (C++ Compatible)</span>
                </div>
                
                <div class="example-box warning">
                    <h4>‚ö†Ô∏è Legacy Issues: 'class' and 'this' keywords</h4>
                    <pre><code><span class="comment">// Old implementation (problematic with C++)</span>
<span class="preprocessor">#define</span> <span class="function">class</span>(name) <span class="keyword">typedef</span> <span class="keyword">struct</span> name name; <span class="keyword">struct</span> name
<span class="preprocessor">#define</span> <span class="function">method</span>(class, func, return_type, ...) \
    return_type (*func)(class* <span class="keyword">this</span>, ##__VA_ARGS__);  <span class="comment">// GNU extension</span></code></pre>
                </div>

                <div class="example-box success">
                    <h4>‚úÖ New Solution in v4.2.2</h4>
                    <pre><code><span class="comment">// New version - C++ compatible and portable</span>
<span class="preprocessor">#define</span> <span class="function">cmlass</span>(name) \
    <span class="keyword">typedef</span> <span class="keyword">struct</span> name name; \
    <span class="keyword">struct</span> name

<span class="preprocessor">#define</span> end_class

<span class="preprocessor">#define</span> <span class="function">property</span>(type, name) type name;

<span class="comment">// For methods without parameters</span>
<span class="preprocessor">#define</span> <span class="function">method0</span>(return_type, name) \
    return_type (*name)(<span class="type">void</span>* self)

<span class="comment">// For methods with parameters</span>
<span class="preprocessor">#define</span> <span class="function">method</span>(return_type, name, ...) \
    return_type (*name)(<span class="type">void</span>* self, __VA_ARGS__)

<span class="comment">// Safe method caller - works with/without parameters</span>
<span class="preprocessor">#define</span> <span class="function">send</span>(obj, method, ...) \
    ((obj)->method ? (obj)->method(obj, ##__VA_ARGS__) : (<span class="type">void</span>)<span class="number">0</span>)</code></pre>
                </div>

                <h4>üìù New Usage Example:</h4>
                <pre><code><span class="comment">// Class definition (using cmlass instead of class)</span>
<span class="function">cmlass</span>(Person) {
    <span class="function">property</span>(<span class="type">char</span>*, name);
    <span class="function">property</span>(<span class="type">int</span>, age);
    
    <span class="function">method0</span>(<span class="type">void</span>, introduce);           <span class="comment">// No parameters</span>
    <span class="function">method</span>(<span class="type">void</span>, speak, <span class="type">const</span> <span class="type">char</span>* msg); <span class="comment">// With parameter</span>
} end_class;

<span class="comment">// Implementation</span>
<span class="type">void</span> <span class="function">Person_introduce</span>(<span class="type">void</span>* ptr) {
    Person* self = (Person*)ptr;
    <span class="function">printf</span>(<span class="string">"Hi, I'm %s, age %d\n"</span>, self->name, self->age);
}

<span class="type">void</span> <span class="function">Person_speak</span>(<span class="type">void</span>* ptr, <span class="type">const</span> <span class="type">char</span>* msg) {
    Person* self = (Person*)ptr;
    <span class="function">printf</span>(<span class="string">"%s says: %s\n"</span>, self->name, msg);
}

<span class="comment">// Usage</span>
<span class="type">int</span> <span class="function">main</span>() {
    Person p = {.name = <span class="string">"Adham"</span>, .age = <span class="number">25</span>};
    p.introduce = Person_introduce;
    p.speak = Person_speak;
    
    <span class="function">send</span>(&p, introduce);        <span class="comment">// ‚úÖ Works</span>
    <span class="function">send</span>(&p, speak, <span class="string">"Hello"</span>);   <span class="comment">// ‚úÖ Works</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>

                <!-- What's New in v4.2.3 -->
                <div class="example-box success">
                    <h4>üöÄ Version 4.2.3 - Stability & Cross-Platform Hardening</h4>
                    <p>This release focuses on final hardening, cross-platform compatibility (especially for Android), and squashing the last few bugs to ensure a smooth, warning-free experience across all environments.</p>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-mobile-alt" style="color: #10b981;"></i>
                            <h3>Complete Android Support</h3>
                        </div>
                        <ul style="list-style: none; padding: 0;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Safe I/O functions with proper fallbacks</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> <code>cm_error</code> now prints to console + logs</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> <code>cm_gets</code> successfully reads user input</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Zero unused parameter warnings</li>
                        </ul>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-shield-alt" style="color: #10b981;"></i>
                            <h3>NULL-Safe Printing</h3>
                        </div>
                        <ul style="list-style: none; padding: 0;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> <code>cm_printf</code> handles NULL format strings</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> <code>cm_error</code> handles NULL format strings</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> No more crashes from invalid format args</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Graceful fallback on all platforms</li>
                        </ul>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-broom" style="color: #10b981;"></i>
                            <h3>Zero Warnings</h3>
                        </div>
                        <ul style="list-style: none; padding: 0;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> All compiler warnings fixed</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Explicit <code>(void)</code> casts for unused params</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Clean builds with <code>-Wall -Wextra</code></li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Production-ready warning-free code</li>
                        </ul>
                    </div>
                </div>

                <div class="card-grid" style="margin-top: 1rem;">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-print" style="color: #10b981;"></i>
                            <h3>Reliable String Printing</h3>
                        </div>
                        <ul style="list-style: none; padding: 0;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> <code>string_print</code> uses direct <code>printf</code></li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Guaranteed output on all systems</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Fixed string display issues</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Works on Android, Linux, Windows</li>
                        </ul>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-code-branch" style="color: #10b981;"></i>
                            <h3>Portable I/O</h3>
                        </div>
                        <ul style="list-style: none; padding: 0;">
                            <li><i class="fas fa-check" style="color: #10b981;"></i> I/O functions declared in <code>CM.h</code></li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Available for general application use</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> Consistent API across platforms</li>
                            <li><i class="fas fa-check" style="color: #10b981;"></i> No internal linkage restrictions</li>
                        </ul>
                    </div>
                </div>

                <h3 style="margin-top: 2rem;">‚úÖ Bug Fixes in v4.2.3</h3>

                <table class="table">
                    <tr>
                        <th>Issue</th>
                        <th>Location</th>
                        <th>Status</th>
                    </tr>
                    <tr>
                        <td><code>cm_printf</code> crash with NULL format string</td>
                        <td><code>cm_printf</code></td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td><code>cm_error</code> output not visible on Android</td>
                        <td><code>cm_error</code></td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td><code>cm_gets</code> failing to read input on Android</td>
                        <td><code>cm_gets</code></td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>Unused parameter warnings on Android</td>
                        <td><code>cm_gets</code></td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>String content not printing in <code>string_print</code></td>
                        <td><code>string_print</code></td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>Safe I/O functions not accessible from <code>main.c</code></td>
                        <td>Header declarations</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                </table>

                <div class="example-box" style="margin-top: 2rem;">
                    <h4>üìù What's Next?</h4>
                    <p>With version 4.2.3, the CM Library has achieved a state of high stability and cross-platform robustness. Future work will focus on:</p>
                    <ul>
                        <li>Expanding the collection of utility functions</li>
                        <li>Adding more comprehensive examples and tutorials</li>
                        <li>Performance benchmarking and optimization</li>
                        <li>Community-driven feature requests</li>
                    </ul>
                </div>

                <div class="example-box warning">
                    <h4>üéØ Migration Guide from v4.2.2</h4>
                    <p>This is a minor release focused on fixes and internal hardening. <strong>No breaking changes or API modifications</strong> are required. Simply drop in the new <code>CM.h</code> and <code>CM.c</code> files and recompile.</p>
                </div>

                <!-- Version History -->
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <i class="fas fa-history"></i>
                        <h3>üì¶ Version History</h3>
                    </div>
                    <pre style="margin: 0.5rem 0;"><code>| Version | Date | Changes |
|---------|------|---------|
| 4.2.3   | 2026 | Complete Android support, NULL-safe printing, zero warnings, reliable string I/O |
| 4.2.2   | 2026 | Thread-local exceptions, fixed arena cleanup, cmlass macro |
| 4.2.1   | 2026 | Arena allocator, unified memory system |
| 4.0.0   | 2026 | Thread safety, OOP macros |
| 3.0.0   | 2026 | Complete rewrite, GC, classes |
| 2.0.0   | 2025 | Basic memory tracking |
| 1.0.0   | 2025 | Initial release |</code></pre>
                </div>
            </section>

            <!-- Thread Safety -->
            <section id="thread-safety" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-threads"></i>
                    <span>Thread Safety Analysis</span>
                </div>
                
                <table class="table">
                    <tr><th>Component</th><th>Thread Safety</th><th>Notes</th></tr>
                    <tr><td>GC Allocations</td><td>‚úÖ Safe</td><td>Protected by mutex</td></tr>
                    <tr><td>GC Collections</td><td>‚úÖ Safe</td><td>Protected by mutex</td></tr>
                    <tr><td>Arena Operations</td><td>‚úÖ Safe</td><td>Protected by mutex</td></tr>
                    <tr><td>String Operations</td><td>‚úÖ Safe</td><td>Using GC functions</td></tr>
                    <tr><td>Array Operations</td><td>‚úÖ Safe</td><td>Using GC functions</td></tr>
                    <tr><td>Map Operations</td><td>‚úÖ Safe</td><td>Using GC functions</td></tr>
                    <tr><td>Exception Handling</td><td>‚úÖ Safe</td><td>Thread-local storage (v4.2.2+)</td></tr>
                </table>

                <div class="example-box">
                    <h4>Thread-Safe Example</h4>
                    <pre><code><span class="preprocessor">#include</span> <span class="string">&lt;pthread.h&gt;</span>
<span class="preprocessor">#include</span> <span class="string">"CM.h"</span>

<span class="type">void</span>* <span class="function">thread_func</span>(<span class="type">void</span>* arg) {
    <span class="comment">// Each thread gets its own exception buffer (thread-local)</span>
    <span class="function">cmTry</span> {
        String* s = <span class="function">String_new</span>(<span class="string">"Thread-safe string"</span>);
        s-><span class="function">print</span>(s);
        <span class="function">String_delete</span>(s);
    } <span class="function">cmCatch</span> {
        <span class="function">printf</span>(<span class="string">"Thread error: %s\n"</span>, <span class="function">cmErrorMsg</span>());
    }
    <span class="keyword">return</span> NULL;
}

<span class="type">int</span> <span class="function">main</span>() {
    pthread_t t1, t2;
    <span class="function">pthread_create</span>(&t1, NULL, thread_func, NULL);
    <span class="function">pthread_create</span>(&t2, NULL, thread_func, NULL);
    <span class="function">pthread_join</span>(t1, NULL);
    <span class="function">pthread_join</span>(t2, NULL);
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>
                </div>
            </section>

            <!-- Known Issues - Updated for v4.2.3 -->
            <section id="known-issues" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-bug"></i>
                    <span>Known Issues & Limitations</span>
                </div>

                <table class="table">
                    <tr>
                        <th>Issue</th>
                        <th>Severity</th>
                        <th>Location</th>
                        <th>Description</th>
                        <th>Solution</th>
                        <th>Status in v4.2.3</th>
                    </tr>
                    <tr>
                        <td>Global exception buffer</td>
                        <td><span class="issue-severity severity-critical">CRITICAL</span></td>
                        <td>CM_TRY/CM_THROW</td>
                        <td>Global jmp_buf pointer causes crashes in multi-threaded code.</td>
                        <td>Use thread-local storage (__thread)</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>CM_WITH_ARENA macro leak</td>
                        <td><span class="issue-severity severity-high">HIGH</span></td>
                        <td>arena macros</td>
                        <td>break/continue/return inside macro prevents arena destruction</td>
                        <td>Use cleanup attribute</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>this parameter name</td>
                        <td><span class="issue-severity severity-medium">MEDIUM</span></td>
                        <td>OOP macros</td>
                        <td>Parameter name 'this' conflicts with C++</td>
                        <td>Use 'self' instead</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>##__VA_ARGS__ extension</td>
                        <td><span class="issue-severity severity-medium">MEDIUM</span></td>
                        <td>method macro</td>
                        <td>Uses GNU extension, not portable</td>
                        <td>Use standard variadic macros</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>class keyword conflict</td>
                        <td><span class="issue-severity severity-medium">MEDIUM</span></td>
                        <td>OOP macros</td>
                        <td>'class' is reserved in C++</td>
                        <td>Use 'cmlass' instead</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>Methods without parameters</td>
                        <td><span class="issue-severity severity-medium">MEDIUM</span></td>
                        <td>method macro</td>
                        <td>Can't define methods with zero parameters</td>
                        <td>Use method0 macro</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>Android I/O issues</td>
                        <td><span class="issue-severity severity-medium">MEDIUM</span></td>
                        <td>cm_printf/cm_gets</td>
                        <td>Printf not working, fgets failing on Android</td>
                        <td>Safe I/O functions with fallbacks</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                    <tr>
                        <td>String printing issues</td>
                        <td><span class="issue-severity severity-low">LOW</span></td>
                        <td>string_print</td>
                        <td>Strings not displaying on some systems</td>
                        <td>Direct printf usage</td>
                        <td><span class="tag tag-fixed">‚úÖ FIXED</span></td>
                    </tr>
                </table>
            </section>

            <!-- Solutions & Best Practices -->
            <section id="solutions" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-check-double"></i>
                    <span>Solutions & Best Practices</span>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-shield-alt"></i>
                            <h3>Exception Safety</h3>
                        </div>
                        <pre style="margin: 0.5rem 0;"><code><span class="comment">// Thread-local exception handling (v4.2.2+)</span>
__thread jmp_buf __thread_buffer;

<span class="preprocessor">#define</span> THREAD_TRY() \
    jmp_buf __local_buf; \
    jmp_buf* __old = &__thread_buffer; \
    __thread_buffer = __local_buf; \
    <span class="keyword">if</span> (setjmp(__local_buf) == <span class="number">0</span>)</code></pre>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-broom"></i>
                            <h3>Arena Safety</h3>
                        </div>
                        <pre style="margin: 0.5rem 0;"><code><span class="comment">// Use CM_WITH_ARENA for automatic cleanup (v4.2.2+)</span>
<span class="function">CM_WITH_ARENA</span>(<span class="number">4096</span>) {
    <span class="comment">// Your temporary allocations here</span>
    <span class="comment">// Auto-cleaned even with break/return!</span>
}</code></pre>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-code"></i>
                            <h3>Portable OOP</h3>
                        </div>
                        <pre style="margin: 0.5rem 0;"><code><span class="comment">// Use cmlass instead of class (v4.2.2+)</span>
<span class="function">cmlass</span>(MyClass) {
    <span class="function">property</span>(<span class="type">int</span>, value);
    <span class="function">method0</span>(<span class="type">void</span>, process);
} end_class;</code></pre>
                    </div>
                </div>
            </section>

            <!-- Complete Examples (kept as before) -->
            <section id="examples" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-code"></i>
                    <span>Complete Working Examples</span>
                </div>

                <h3>Example 1: Student Management System</h3>
                <pre><code><span class="preprocessor">#include</span> <span class="string">"CM.h"</span>

<span class="keyword">typedef</span> <span class="keyword">struct</span> {
    String* name;
    <span class="type">int</span> age;
    <span class="type">double</span> gpa;
} Student;

Student* <span class="function">Student_new</span>(<span class="type">const</span> <span class="type">char</span>* name, <span class="type">int</span> age, <span class="type">double</span> gpa) {
    Student* s = (Student*)<span class="function">cm_alloc</span>(<span class="keyword">sizeof</span>(Student), <span class="string">"Student"</span>, __FILE__, __LINE__);
    s->name = <span class="function">String_new</span>(name);
    s->age = age;
    s->gpa = gpa;
    <span class="keyword">return</span> s;
}

<span class="type">void</span> <span class="function">Student_delete</span>(Student* s) {
    <span class="keyword">if</span> (!s) <span class="keyword">return</span>;
    <span class="function">String_delete</span>(s->name);
    <span class="function">cm_free</span>(s);
}

<span class="type">void</span> <span class="function">Student_print</span>(Student* s) {
    <span class="function">printf</span>(<span class="string">"Student: "</span>);
    s->name-><span class="function">print</span>(s->name);
    <span class="function">printf</span>(<span class="string">", Age: %d, GPA: %.2f\n"</span>, s->age, s->gpa);
}

<span class="type">int</span> <span class="function">main</span>() {
    <span class="function">CM_ABOUT</span>();
    
    <span class="comment">// Create students</span>
    Student* students[<span class="number">3</span>];
    students[<span class="number">0</span>] = <span class="function">Student_new</span>(<span class="string">"Adham Hossam"</span>, <span class="number">25</span>, <span class="number">3.8</span>);
    students[<span class="number">1</span>] = <span class="function">Student_new</span>(<span class="string">"John Doe"</span>, <span class="number">22</span>, <span class="number">3.5</span>);
    students[<span class="number">2</span>] = <span class="function">Student_new</span>(<span class="string">"Jane Smith"</span>, <span class="number">23</span>, <span class="number">3.9</span>);
    
    <span class="comment">// Process students</span>
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < <span class="number">3</span>; i++) {
        <span class="function">Student_print</span>(students[i]);
    }
    
    <span class="comment">// Cleanup</span>
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < <span class="number">3</span>; i++) {
        <span class="function">Student_delete</span>(students[i]);
    }
    
    <span class="function">CM_REPORT</span>();
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>

                <h3>Example 2: Arena-Based Temporary Processing</h3>
                <pre><code><span class="preprocessor">#include</span> <span class="string">"CM.h"</span>

<span class="type">void</span> <span class="function">process_batch</span>(<span class="type">int</span> batch_size) {
    <span class="comment">// Arena for temporary allocations - automatically freed</span>
    CMArena* temp = <span class="function">cm_arena_create</span>(<span class="number">1024</span> * <span class="number">1024</span>);  <span class="comment">// 1MB arena</span>
    <span class="function">cm_arena_push</span>(temp);
    
    <span class="type">int</span>* data = (<span class="type">int</span>*)<span class="function">cm_alloc</span>(batch_size * <span class="keyword">sizeof</span>(<span class="type">int</span>), <span class="string">"temp"</span>, __FILE__, __LINE__);
    
    <span class="comment">// Process data</span>
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < batch_size; i++) {
        data[i] = i * i;
    }
    
    <span class="comment">// Calculate average</span>
    <span class="type">double</span> sum = <span class="number">0</span>;
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < batch_size; i++) {
        sum += data[i];
    }
    <span class="function">printf</span>(<span class="string">"Batch average: %.2f\n"</span>, sum / batch_size);
    
    <span class="comment">// Arena automatically frees ALL memory</span>
    <span class="function">cm_arena_pop</span>();
    <span class="function">cm_arena_destroy</span>(temp);
}

<span class="type">int</span> <span class="function">main</span>() {
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < <span class="number">10</span>; i++) {
        <span class="function">process_batch</span>(<span class="number">1000</span>);  <span class="comment">// No memory leaks!</span>
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>
            </section>

            <!-- API Reference -->
            <section id="api-reference" class="section fade-in">
                <div class="section-title">
                    <i class="fas fa-book"></i>
                    <span>Complete API Reference</span>
                </div>

                <h3>Memory Management</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>void* cm_alloc(size_t size, const char* type, const char* file, int line)</td><td>Allocate GC-tracked memory</td></tr>
                    <tr><td>void cm_free(void* ptr)</td><td>Decrement refcount, free if zero</td></tr>
                    <tr><td>void cm_retain(void* ptr)</td><td>Increment reference count</td></tr>
                    <tr><td>void cm_gc_collect(void)</td><td>Force garbage collection</td></tr>
                    <tr><td>void cm_gc_stats(void)</td><td>Print GC statistics</td></tr>
                </table>

                <h3>Arena Allocator</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>CMArena* cm_arena_create(size_t size)</td><td>Create new arena</td></tr>
                    <tr><td>void cm_arena_destroy(CMArena* arena)</td><td>Destroy arena and free all memory</td></tr>
                    <tr><td>void cm_arena_push(CMArena* arena)</td><td>Set as current arena</td></tr>
                    <tr><td>void cm_arena_pop(void)</td><td>Remove current arena</td></tr>
                </table>

                <h3>String API</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>String* String_new(const char* initial)</td><td>Create new string</td></tr>
                    <tr><td>void String_delete(String* self)</td><td>Free string</td></tr>
                    <tr><td>String* string_concat(String* self, const char* other)</td><td>Concatenate string</td></tr>
                    <tr><td>String* string_upper(String* self)</td><td>Convert to uppercase</td></tr>
                    <tr><td>String* string_lower(String* self)</td><td>Convert to lowercase</td></tr>
                    <tr><td>void string_print(String* self)</td><td>Print to stdout</td></tr>
                    <tr><td>int string_length(String* self)</td><td>Get string length</td></tr>
                    <tr><td>char string_charAt(String* self, int index)</td><td>Get character at index</td></tr>
                    <tr><td>String* cm_input(const char* prompt)</td><td>Read input from user</td></tr>
                </table>

                <h3>Array API</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>Array* Array_new(int element_size, int capacity)</td><td>Create new array</td></tr>
                    <tr><td>void Array_delete(Array* self)</td><td>Free array</td></tr>
                    <tr><td>Array* array_push(Array* self, void* value)</td><td>Add element to end</td></tr>
                    <tr><td>void* array_pop(Array* self)</td><td>Remove and return last element</td></tr>
                    <tr><td>void* array_get(Array* self, int index)</td><td>Get element at index</td></tr>
                    <tr><td>int array_size(Array* self)</td><td>Get current size</td></tr>
                </table>

                <h3>Map API</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>Map* Map_new(void)</td><td>Create new map</td></tr>
                    <tr><td>void Map_delete(Map* self)</td><td>Free map</td></tr>
                    <tr><td>Map* map_set(Map* self, const char* key, void* value)</td><td>Set key-value pair</td></tr>
                    <tr><td>void* map_get(Map* self, const char* key)</td><td>Get value by key</td></tr>
                    <tr><td>int map_has(Map* self, const char* key)</td><td>Check if key exists</td></tr>
                    <tr><td>int map_size_func(Map* self)</td><td>Get number of entries</td></tr>
                </table>

                <h3>Error Handling</h3>
                <table class="table">
                    <tr><th>Function/Macro</th><th>Description</th></tr>
                    <tr><td>cmTry</td><td>Start try block</td></tr>
                    <tr><td>cmCatch</td><td>Start catch block</td></tr>
                    <tr><td>cmThrow(error, message)</td><td>Throw exception</td></tr>
                    <tr><td>const char* cm_error_string(int error)</td><td>Get error description</td></tr>
                    <tr><td>const char* cm_error_get_message(void)</td><td>Get last error message</td></tr>
                    <tr><td>int cm_error_get_last(void)</td><td>Get last error code</td></tr>
                </table>

                <h3>Utility Functions</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>void cm_random_seed(unsigned int seed)</td><td>Seed random generator</td></tr>
                    <tr><td>void cm_random_string(char* buffer, size_t length)</td><td>Generate random string</td></tr>
                    <tr><td>CM_ABOUT()</td><td>Display library info</td></tr>
                    <tr><td>CM_REPORT()</td><td>Show GC statistics</td></tr>
                </table>

                <h3>Safe I/O Functions (v4.2.3+)</h3>
                <table class="table">
                    <tr><th>Function</th><th>Description</th></tr>
                    <tr><td>void cm_printf(const char* format, ...)</td><td>Safe printf with NULL handling</td></tr>
                    <tr><td>void cm_error(const char* format, ...)</td><td>Safe error printing with Android support</td></tr>
                    <tr><td>char* cm_gets(char* buffer, size_t size)</td><td>Safe input reading with fallbacks</td></tr>
                </table>
            </section>

            <!-- Footer - Updated to v4.2.3 -->
            <section style="margin-top: 3rem; text-align: center; padding: 2rem; border-top: 1px solid var(--border);">
                <i class="fas fa-cube" style="font-size: 3rem; color: var(--accent-info); opacity: 0.5;"></i>
                <p style="margin-top: 1rem; color: var(--text-muted);">
                    CM Library v4.2.3 by Adham Hossam<br>
                    MIT License - 2026<br>
                    Version 4.2.3: ‚úÖ Thread-safe | ‚úÖ Arena cleanup | ‚úÖ C++ Compatible | ‚úÖ Android Support | ‚úÖ Zero Warnings
                    <span class="tag"><i class="fab fa-github"></i> ALightbolt4G/CM</span>
                </p>
            </section>
        </main>
    </div>

    <script>
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        function setTheme(theme) {
            if (theme === 'dark') {
                body.classList.add('dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Light Mode</span>';
            } else {
                body.classList.remove('dark');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i><span>Dark Mode</span>';
            }
            localStorage.setItem('cm-theme', theme);
        }

        setTheme(localStorage.getItem('cm-theme') || 'light');

        themeToggle.addEventListener('click', () => {
            setTheme(body.classList.contains('dark') ? 'light' : 'dark');
        });

        // Mobile Sidebar
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');

        if (menuToggle) {
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });
        }

        overlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Close sidebar after click (mobile)
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 1024) {
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                }
            });
        });

        // Intersection Observer for fade-in
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.section:not(.fade-in)').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>